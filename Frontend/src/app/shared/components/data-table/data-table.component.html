<div class="table-container">
    <table class="data-table">
        <thead>
            <tr>
                <th (click)="onSort('timestamp')" class="sortable">
                    Time
                    <span class="sort-indicator" *ngIf="sortField === 'timestamp'">
                        {{ sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="onSort('type')" class="sortable">
                    Type
                    <span class="sort-indicator" *ngIf="sortField === 'type'">
                        {{ sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th (click)="onSort('name')" class="sortable" *ngIf="showLocationColumn">
                    Location
                    <span class="sort-indicator" *ngIf="sortField === 'name'">
                        {{ sortDirection === 'asc' ? '↑' : '↓' }}
                    </span>
                </th>
                <th>CO2</th>
                <th>PM2.5</th>
                <th>Humidity</th>
                <th>Motion</th>
                <th>Energy</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let reading of data">
                <td>{{ formatDate(reading.timestamp) }}</td>
                <td>{{ formatType(reading.type) }}</td>
                <td *ngIf="showLocationColumn">{{ formatLocation(reading.name) }}</td>
                <td>{{ reading.co2 ?? '-' }}</td>
                <td>{{ reading.pm25 ?? '-' }}</td>
                <td>{{ reading.humidity ?? '-' }}</td>
                <td>{{ reading.motionDetected ? '✓' : '-' }}</td>
                <td>{{ reading.energy ?? '-' }}</td>
            </tr>
        </tbody>
    </table>

    <div class="pagination">
        <button class="pagination-btn" (click)="onPrev()" [disabled]="!canGoPrev">
            Previous
        </button>
        <span class="page-info">
            Page {{ currentPage }} ({{ totalCount }} total)
        </span>
        <button class="pagination-btn" (click)="onNext()" [disabled]="!canGoNext">
            Next
        </button>
    </div>
</div>